#  lotus 私网搭建流程

* 预先完成一定的算力给创世节点

```bash
./lotus-seed  pre-seal --sector-size 8388608 --num-sectors 10

--sector-size 算力的大小 分为  2048 8388608 536870912 34359738368  68719476736
单位为 byte

这里也是选择创建矿工的大小 2K 8M 512M 32G 64G 矿工越大，所消耗的时间也会越久

测试环境一般选择 2K或者 512M，2K的出块时间为 2秒钟，方便于debug，512M的出块时间为30秒钟，跟接近于真实环境

目前的intel机器完成32G时间过久，不方便于测试

完成之后会生成 /root/.genesis-sectors 的隐藏文件
```

* 生成私网，网络名称的json文件
```bash
./lotus-seed  genesis new /root/localnet.json



./lotus-seed genesis set-vrk --account <address> /root/localnet.json

此时目录下会生成 localnet.json 文件
```

* 初始化矿工号

```bash
./lotus-seed  genesis add-miner /root/localnet.json ~/.genesis-sectors/pre-seal-t01000.json
```

* 运行lotus程序来同步区块

```bash
运行daemon之后程序会一直挂在这，所以可以使用 nohup + & 的方式使其在后台运行

LOTUS_SKIP_GENESIS_CHECK=_yes_ LOTUS_IGNORE_DRAND=_yes_ nohup ./lotus daemon --lotus-make-genesis=dev.gen --genesis-template=localnet.json --bootstrap=false --api=5651 > lotus.log 2>&1 &

--api 指定lotus启动后端口监听，指定其他端口谨防冲突
```

* 导入钱包地址的私钥

```bash
./lotus wallet import ~/.genesis-sectors/pre-seal-t01000.key
```

```bash
./lotus wallet list
t3...

此时会输出一个t3的钱包地址，这个就是刚才导入的地址，目前所有的消息签名时都是需要设置默认钱包地址的，所以这里我们需要进行默认钱包地址的设置

./lotus wallet set-default t3...

设置完成之后也可以通过

./lotus wallet default 命令来查看此时默认的钱包地址是什么


```


* 初始化矿工所需要的文件

```bash
./lotus-miner init --genesis-miner --actor=t01000 --sector-size=8388608 --pre-sealed-sectors=~/.genesis-sectors --pre-sealed-metadata=~/.genesis-sectors/pre-seal-t01000.json --nosync
```

* 运行矿工的挖矿部分

```bash
nohup ./lotus-miner run --nosync >miner.log 2>&1 &
```
* 到此创世矿工搭建完成

